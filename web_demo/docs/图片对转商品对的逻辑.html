<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.1.1 (456663)"/><meta name="author" content="a798987859@126.com"/><meta name="created" content="2018-05-20 06:17:03 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2018-05-20 06:27:01 +0000"/><title>图片对转商品对的逻辑</title></head><body><div><br/></div><div>输入表：image_match_result</div><div>输出表：item_match_result</div><div><br/></div><div><br/></div><div>以image_match_result的added_to_item_match为标志位，处理过的1，未处理过的0</div><div><br/></div><div>处理逻辑：</div><div><br/></div><div>加载所有未处理过的</div><div><br/></div><div>按照b_id,c_id来group，即找到两个商品所有匹配的图片。</div><div><br/></div><div>然后计算sim_score:</div><div><br/></div><div>参考两个值：这两个商品里所有匹配图片的最小hash差异值，这两个商品所有图片相互匹配的个数。</div><div><br/></div><div>给两个算法：</div><div>1.简单算法，如果初期为了简单看效果的话，可以直接用最小hash差异值替代</div><div>2.综合算法，用最小hash值 ／ 相互匹配的个数。</div><div><br/></div><div>sim_score越小，表明两个商品匹配度越高。</div><div><br/></div><div>另外，建议把这两个值（最小hash，相互匹配图片数量）也存到输出表里去。</div><div><br/></div><div>然后就是根据输出表的格式把输入表中的信息填进去了。</div><div><br/></div></body></html>